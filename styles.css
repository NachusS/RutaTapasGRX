:root{
  --bg:#fff;--fg:#101418;--muted:#6b7280;--card:#f5f7fb;--accent:#0ea5e9;--accent-2:#22c55e;--border:#e5e7eb;
}
html[data-theme="dark"]{--bg:#0b0f14;--fg:#e5e7eb;--muted:#9aa4b2;--card:#10161d;--accent:#38bdf8;--accent-2:#34d399;--border:#1f2937}
*{box-sizing:border-box}body{margin:0;background:var(--bg);color:var(--fg);font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
.app-header{position:sticky;top:0;z-index:10;backdrop-filter:saturate(120%) blur(6px);background:linear-gradient(to bottom, color-mix(in oklab, var(--bg), transparent 0%), color-mix(in oklab, var(--bg), transparent 20%));border-bottom:1px solid var(--border);padding:.75rem 1rem;display:flex;gap:1rem;align-items:center;justify-content:space-between;flex-wrap:wrap}
.brand{display:flex;align-items:center;gap:.6rem}.logo{font-size:1.5rem}
.controls{display:flex;gap:1rem;align-items:center;flex-wrap:wrap}
.progress-wrap{min-width:220px}.progress-text{font-size:.9rem;color:var(--muted)}
.progress-bar{width:100%;height:8px;background:var(--border);border-radius:999px;overflow:hidden}#progressBar{height:100%;width:0%;background:var(--accent-2)}
.buttons{display:flex;gap:.5rem;flex-wrap:wrap}.btn{background:var(--accent);color:#fff;border:0;padding:.55rem .8rem;border-radius:10px;cursor:pointer;transition:transform .08s ease,opacity .2s ease}.btn:hover{transform:translateY(-1px);opacity:.95}.btn:active{transform:translateY(0)}.btn-ghost{background:transparent;color:var(--fg);border:1px solid var(--border)}
.layout{display:grid;grid-template-columns:1fr;gap:0}#map{width:100%;height:60vh;border-bottom:1px solid var(--border)}#panel{padding:1rem;display:grid;gap:.75rem;grid-template-columns:1fr}
.card{background:var(--card);border:1px solid var(--border);border-radius:14px;overflow:hidden;display:grid;grid-template-columns:160px 1fr;gap:0}
.card img{width:100%;height:100%;object-fit:cover;display:block}.card-body{padding:.75rem}.card-title{margin:.2rem 0 .25rem;font-weight:700}.card-sub{margin:0;color:var(--muted);font-size:.9rem}.card-actions{margin-top:.6rem;display:flex;gap:.5rem;flex-wrap:wrap}.badge{padding:.1rem .4rem;border:1px solid var(--border);border-radius:999px;font-size:.75rem;color:var(--muted)}
.app-footer{border-top:1px solid var(--border);padding:1rem;color:var(--muted);display:grid;gap:.25rem}
@media (min-width:900px){.layout{grid-template-columns:2fr 1fr}#map{height:76vh;border-right:1px solid var(--border);border-bottom:0}#panel{max-height:76vh;overflow:auto}}
.gm-style .gm-btn,.gm-btn{background:var(--accent);color:#fff;border:0;padding:.45rem .7rem;border-radius:10px;cursor:pointer;font-size:.9rem;line-height:1;display:inline-flex;align-items:center;gap:.35rem;box-shadow:0 1px 2px rgba(0,0,0,.15)}.gm-style .gm-btn:hover,.gm-btn:hover{opacity:.95;transform:translateY(-1px)}.gm-style .gm-btn:active,.gm-btn:active{transform:translateY(0)}.gm-style .gm-btn.gm-done{background:transparent;color:var(--fg);border:1px solid var(--border)}
.toast-container{position:fixed;bottom:16px;left:50%;transform:translateX(-50%);display:grid;gap:8px;z-index:9999}.toast{background:var(--card);color:var(--fg);border:1px solid var(--border);box-shadow:0 8px 20px rgba(0,0,0,.2);border-radius:12px;padding:.75rem .85rem;min-width:280px;max-width:92vw}.toast .title{font-weight:700;margin-bottom:.35rem}.toast .actions{display:flex;gap:.5rem;margin-top:.5rem;flex-wrap:wrap}.eta,.metrics{font-size:.9rem;color:var(--fg);background:color-mix(in oklab, var(--accent) 12%, var(--card));border:1px solid var(--border);border-radius:999px;padding:.25rem .6rem;display:inline-block}


/* --- Revamped cards for desktop & mobile --- */
#panel{ padding: 1rem; display: grid; gap: 1rem; grid-template-columns: 1fr; }

.card{
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 16px;
  overflow: hidden;
  display: grid;
  grid-template-columns: 1fr; /* mobile: stacked */
}

.card img{
  width: 100%;
  height: 200px;
  object-fit: cover;
  display: block;
}

.card-body{ padding: 1rem; }
.card-title{ margin: 0 0 .35rem; font-weight: 800; font-size: 1rem; }
.card-sub{ margin: 0 0 .35rem; color: var(--muted); font-size: .95rem; }
.card .details{ margin-top: .35rem; color: var(--muted); font-size: .9rem; display: grid; gap: .25rem; }
.card .details .meta a{ margin-right: .5rem; }
.card-actions{ margin-top: .75rem; display: grid; grid-template-columns: 1fr 1fr; gap: .5rem; }
.card-actions .btn{ width: 100%; justify-content: center; padding: .6rem .75rem }

@media (min-width: 1100px){
  /* On desktop, the right panel is narrow; make each card two-column to use space better */
  .card{
    grid-template-columns: 220px 1fr;
    align-items: stretch;
  }
  .card img{
    height: 100%;
    min-height: 180px;
  }
}
