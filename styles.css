:root{
  --bg:#fff; --fg:#1f2937; --muted:#6b7280; --card:#f8fafc; --border:#e5e7eb; --brand:#2563eb; --ok:#16a34a; --warn:#f59e0b; --accent:#d946ef;
}
html[data-theme="dark"]{
  --bg:#0b0f14; --fg:#e5e7eb; --muted:#94a3b8; --card:#111827; --border:#1f2937; --brand:#60a5fa; --ok:#22c55e; --warn:#fbbf24; --accent:#f472b6;
}
*{box-sizing:border-box} body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Arial,sans-serif;background:var(--bg);color:var(--fg)}
.app-header{padding:10px 12px;border-bottom:1px solid var(--border)}
.brand{display:flex;align-items:center;gap:10px}
.brand-cover{width:44px;height:44px;object-fit:cover;border-radius:10px;border:1px solid var(--border)}
.title{margin:0;font-size:1.25rem;font-weight:700}
.version-badge{font-size:.8rem;color:var(--muted);border:1px solid var(--border);padding:2px 8px;border-radius:999px}
.controls-row{display:flex;gap:8px;margin-top:10px;flex-wrap:wrap}
select,.btn{border:1px solid var(--border);background:var(--card);color:var(--fg);padding:8px 12px;border-radius:12px}
.btn{cursor:pointer;transition:transform .06s ease, background .2s}.btn:hover{transform:translateY(-1px)}.btn.primary{background:var(--brand);color:#fff;border-color:transparent}
.progress{margin-top:12px}.progress-header{display:flex;justify-content:space-between;align-items:center}
.progress-bar{height:10px;background:var(--border);border-radius:999px;overflow:hidden;margin-top:6px}.progress-fill{height:100%;width:0;background:linear-gradient(90deg,var(--brand),#22c55e)}
.eta-row{display:flex;justify-content:space-between;color:var(--muted);margin-top:6px}
.nav-actions{display:flex;gap:8px;margin-top:12px;flex-wrap:wrap}
.app-main{display:grid;grid-template-columns:1fr;gap:0}
#map{height:55vh} #panel{max-height:45vh;overflow:auto;border-top:1px solid var(--border)}
.badge{display:inline-block;font-size:.75rem;padding:2px 6px;border-radius:999px;border:1px solid var(--border);color:var(--muted)}
.order-badge{margin-left:6px;background:transparent;border:1px dashed var(--border);color:var(--muted)}
.app-footer{padding:12px;border-top:1px solid var(--border);color:var(--muted)} .legend{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:6px}
.gm-style-iw-d,.gm-style-iw-c{color:#111!important}
.switch{display:inline-flex;align-items:center;gap:8px;padding:4px 8px;border:1px solid var(--border);border-radius:12px;background:var(--card)}
.switch input{display:none}.switch .slider{position:relative;display:inline-block;width:38px;height:20px;border-radius:999px;background:var(--border);transition:background .2s}
.switch .slider::after{content:"";position:absolute;left:2px;top:2px;width:16px;height:16px;border-radius:50%;background:#fff;transition:transform .2s, background .2s, box-shadow .2s;box-shadow:0 1px 3px rgba(0,0,0,.2)}
.switch input:checked + .slider{background:var(--brand)} .switch input:checked + .slider::after{transform:translateX(18px)} .switch .switch-label{font-size:.9rem;color:var(--muted)}
.switch-mobile{display:none}
.control-label,.control-label-mobile{font-weight:700;color:var(--accent);padding:6px 8px;border:1px dashed var(--accent);border-radius:10px;align-self:center}
@media (max-width:899px){.control-label-desktop{display:none}.switch-desktop{display:none}.switch-mobile{display:inline-flex}.control-label-mobile{display:inline-flex}}
@media (min-width:900px){.control-label-mobile{display:none}.app-main{grid-template-columns:60% 40%}#map{height:70vh}#panel{max-height:70vh;border-top:none;border-left:1px solid var(--border)}}
.card{position:relative;display:grid;grid-template-columns:120px 1fr;gap:12px;padding:14px;border-bottom:1px solid var(--border);background:linear-gradient(180deg,var(--bg),color-mix(in oklab,var(--card) 85%,var(--bg)));transition:transform .18s ease,box-shadow .18s ease,background .3s ease,border-color .3s ease}
.card:hover{transform:translateY(-2px);box-shadow:0 8px 28px rgba(0,0,0,.08)} .card .thumb-wrap{position:relative;overflow:hidden;border-radius:12px;border:1px solid var(--border)}
.card img{width:100%;height:110px;object-fit:cover;display:block;transform:scale(1.02);transition:transform .35s ease}.card:hover img{transform:scale(1.06)}
.metadata{display:flex;gap:10px;flex-wrap:wrap;margin:6px 0}.meta-item{font-size:.82rem;color:var(--muted);display:flex;align-items:center;gap:6px}.meta-item a{color:var(--brand);text-decoration:underline;text-underline-offset:2px}
.meta-notes{font-size:.88rem;color:var(--fg);background:color-mix(in oklab,var(--card) 80%,var(--bg));border:1px dashed var(--border);padding:8px 10px;border-radius:10px}
.rating{display:inline-flex;align-items:center;gap:4px;user-select:none}.star{font-size:1.1rem;line-height:1;cursor:pointer;transition:transform .12s ease,filter .12s ease;filter:saturate(.85)}.star:hover{transform:translateY(-1px) scale(1.05);filter:saturate(1)}.star[data-active="true"]{color:#f59e0b}.rating-label{font-size:.85rem;color:var(--muted);margin-right:4px}
@keyframes cardIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}.card{animation:cardIn .25s ease both}