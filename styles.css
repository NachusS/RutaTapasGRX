:root{
}
/* Show only desktop label on desktop; only mobile label on mobile */
@media (max-width: 899px){
.control-label-desktop{display:none}
.switch-desktop{display:none}
.switch-mobile{display:inline-flex}
.control-label-mobile{display:inline-flex}
}
@media (min-width: 900px){
.control-label-mobile{display:none}
}


/* Diagnostics banner */
.diag{position:fixed;left:50%;transform:translateX(-50%);top:8px;z-index:99999;background:#ef4444;color:#fff;padding:8px 12px;border-radius:10px;box-shadow:0 6px 14px rgba(0,0,0,.25);font:600 12px system-ui}


/* Desktop layout */
@media (min-width: 900px){
.app-main{grid-template-columns: 60% 40%;}
#map{height:70vh}
#panel{max-height:70vh;border-top:none;border-left:1px solid var(--border)}
.card{grid-template-columns: 180px 1fr}
.card img{height:140px}
}


/* === v6.4 Card redesign & animations === */
.card{
position:relative;
display:grid;
grid-template-columns:120px 1fr;
gap:12px;
padding:14px;
border-bottom:1px solid var(--border);
background:linear-gradient(180deg, var(--bg), color-mix(in oklab, var(--card) 85%, var(--bg)));
transition: transform .18s ease, box-shadow .18s ease, background .3s ease, border-color .3s ease;
will-change: transform, box-shadow;
}
.card:hover{ transform: translateY(-2px); box-shadow:0 8px 28px rgba(0,0,0,.08); border-color: color-mix(in oklab, var(--border) 60%, var(--fg) 10%); }
.card:focus{ outline:2px solid var(--brand); outline-offset:2px; border-radius:12px; }
.card .thumb-wrap{ position:relative; overflow:hidden; border-radius:12px; border:1px solid var(--border); }
.card img{ width:100%; height:110px; object-fit:cover; display:block; transform:scale(1.02); transition: transform .35s ease; }
.card:hover img{ transform:scale(1.06); }
.card h3{ display:flex; flex-wrap:wrap; align-items:center; gap:6px; margin:0 0 6px 0; font-size:1.05rem; }
.card p{ margin:4px 0; color:var(--muted); font-size:.92rem; }
.metadata{ display:flex; gap:10px; flex-wrap:wrap; margin:6px 0; }
.meta-item{ font-size:.82rem; color:var(--muted); display:flex; align-items:center; gap:6px; }
.meta-item a{ color:var(--brand); text-decoration:underline; text-underline-offset:2px; }
.meta-notes{ font-size:.88rem; color:var(--fg); background:color-mix(in oklab, var(--card) 80%, var(--bg)); border:1px dashed var(--border); padding:8px 10px; border-radius:10px; }
.card .actions{ display:flex; gap:8px; margin-top:10px; flex-wrap:wrap }
.card .actions .btn{ transition: transform .1s ease, background .2s ease; }
.card .actions .btn:active{ transform: translateY(1px) }


/* Stars rating */
.rating{ display:inline-flex; align-items:center; gap:4px; user-select:none; }
.star{ font-size:1.1rem; line-height:1; cursor:pointer; transition: transform .12s ease, filter .12s ease; filter:saturate(0.85); }
.star:hover{ transform: translateY(-1px) scale(1.05); filter:saturate(1); }
.star[data-active="true"]{ color:#f59e0b; } /* amber */
.star[aria-pressed="true"]{ outline: 2px dashed var(--border); outline-offset:2px; border-radius:6px; }
.rating-label{ font-size:.85rem; color:var(--muted); margin-right:4px; }


/* Entrance animation */
@keyframes cardIn {
from { opacity:0; transform: translateY(8px); }
to { opacity:1; transform: translateY(0); }
}
.card{ animation: cardIn .25s ease both; }